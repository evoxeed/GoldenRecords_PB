# Perfect Bugs — Хаб, трек 1
Python 3.12.7
## Инструкция по установке
1. Установка всех зависимостей 
bash 
pip install -r requirements.txt
2. Файл с исходным датасетом должен называться dirty.csv и храниться в папке data/
  (путь до файла определён в файле main.py - переменная csvInputPath)

3. Запуск программы
bash 
py main.py
4. Готовая таблица по умолчанию сохраняется в файл golden_records.csv в папке data/
  (путь до файла определён в файле main.py, переменная csvOutputPath)

## Документация
### Алгоритм

1. Загрузка данных
Данные загружаются из CSV-файла. Поле update_date приводится к формату datetime с обработкой ошибок. Это необходимо для корректного сравнения дат.

2. Создание хэш-таблицы для уникальных записей
    - Ключом в хэш-таблице выступает значение client_inn (ИНН клиента).
    - Значением является список, содержащий:
        1. Дату последнего обновления (update_date).
        2. Полная запись клиента.
3. Логика обработки данных
    - Если ИНН клиента встречается впервые, его данные записываются в хэш-таблицу.
    - Если ИНН уже есть в хэше:
        - Сравнивается текущая запись с ранее сохраненной по полю update_date.
        - Если новая запись более актуальна:
            - Обновляется дата.
            - Поля с отсутствующими значениями дополняются данными из новой записи.
4. Сохранение результата
    Все записи из хэш-таблицы сохраняются в выходной файл golden_records.csv с использованием табуляции (\t) в качестве разделителя.

### Пояснения к коду
#### Ключевые функции

1. Преобразование даты:
goldenRecord['update_date'] = pd.to_datetime(goldenRecord['update_date'], errors='coerce')
Обеспечивает обработку ошибок и преобразование даты в формат datetime.

2. Хэш-таблица для уникальных ИНН:
seen_inns = {}
Хэш-таблица используется для быстрого доступа к уникальным записям по ИНН.

3. Объединение данных:
for i in non_null_columns:
    seen_inns[inn][1][i] = row[i]
Обновляет информацию в существующей записи, дополняя недостающие поля.

4. Сохранение результата:
with open(csvOutputPath, 'w', newline='', encoding='utf-8') as f:
    f.write('\t'.join(goldenRecord.columns) + '\n')
